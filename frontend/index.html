<!DOCTYPE html>
<html>
<head>
  <title>Book Recommender</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <h1>Find Your Next Book</h1>
  <form id="recommendationForm">
    <label>Genres:</label><br>
    <input type="checkbox" name="genre" value="fantasy">Fantasy
    <input type="checkbox" name="genre" value="sci-fi">Sci-fi
    <input type="checkbox" name="genre" value="romance">Romance
    <input type="checkbox" name="genre" value="dystopian">Dystopian
    <input type="checkbox" name="genre" value="mystery">Mystery
    <input type="checkbox" name="genre" value="young-adult">Young Adult (YA)<br>
    <input type="checkbox" name="genre" value="non-fiction">Non-fiction



    <label>Mood:</label><br>
    <select name="mood">
      <option value="dark">Dark</option>
      <option value="uplifting">Uplifting</option>
      <option value="melancholic">Melancholic</option>
      <option value="heartwarming">Heartwarming</option>
      <option value="introspective">Introspective</option>
      <option value="whimsical">Whimsical </option>
      <option value="nostalgic ">Nostalgic </option>
    </select><br>

    <label>Books you liked:</label><br>
    <input type="text" name="liked_books"><br>

    <button type="submit">Get Recommendations</button>
  </form>

  <div id="results" class="results"></div>

  <script>
  document.getElementById("recommendationForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());
    
    const res = await fetch("http://127.0.0.1:5000/recommend", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const results = await res.json();
console.log("Results from backend:", results);

const resultsContainer = document.getElementById("results");

if (results.length === 0) {
  resultsContainer.innerHTML = `
    <div class="no-results">
      <p>No recommendations found. Try different genres or keywords.</p>
    </div>
  `;
} else {
  resultsContainer.innerHTML = results.map(book => `
    <div class="book-result">
      <h3>${book.title}</h3>
      <p>${book.reason}</p>
    </div>
  `).join("");
}

  }); 



</script>

</body>
</html>
